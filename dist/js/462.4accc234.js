"use strict";(self["webpackChunkcafeteria_administracion_vue"]=self["webpackChunkcafeteria_administracion_vue"]||[]).push([[462],{6462:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var o=a(4108),r=a(9096),c=a(7764);const l=e=>((0,o.ED)("data-v-53a4deb1"),e=e(),(0,o.ii)(),e),s={class:"entry-title d-flex justify-content-between p-2"},n={class:"text-success fs-3 fw-bold"},i=l((()=>(0,o.QD)("i",{class:"fa fa-trash-alt"},null,-1))),u=l((()=>(0,o.QD)("i",{class:"fa fa-upload"},null,-1))),d=l((()=>(0,o.QD)("hr",null,null,-1))),p={class:"d-flex flex-column px-3 h-75"},g={class:"input-group mb-3"},m=l((()=>(0,o.QD)("span",{class:"input-group-text",id:"basic-addon1"},"Nombre",-1))),h={class:"input-group mb-3"},b=l((()=>(0,o.QD)("span",{class:"input-group-text",id:"basic-addon1"},"Precio",-1))),f=l((()=>(0,o.QD)("span",{class:"input-group-text"},"$",-1))),D=l((()=>(0,o.QD)("span",{class:"input-group-text",id:"basic-addon1"},"Categoria",-1))),y=["value"],v=["value"],w=l((()=>(0,o.QD)("option",null,null,-1))),k=["value"],Q={class:"input-group mb-3"},x=l((()=>(0,o.QD)("span",{class:"input-group-text",id:"basic-addon1"},"Cantidad",-1))),P={class:"input-group"},C=l((()=>(0,o.QD)("span",{class:"input-group-text"},"Descripción",-1))),I={class:"input-group"},A={class:"form-check form-switch"},W=l((()=>(0,o.QD)("label",{class:"form-check-label",for:"flexSwitchCheckChecked"},"Estatus",-1))),z={class:"input-group"},S={class:"form-check form-switch"},V=l((()=>(0,o.QD)("label",{class:"form-check-label",for:"flexSwitchCheckChecked"},"Disponible",-1))),E=l((()=>(0,o.QD)("span",{class:"fs-2"}," Fecha de creación: ",-1))),U={class:"mx-1 fs-4"},O={class:"mx-1 fs-4"},F={class:"mx-1 fs-4 fw-light"},$=["src"],_=["src"];function M(e,t,a,l,M,B){const L=(0,o.E1)("Fab");return M.product?((0,o.Wz)(),(0,o.An)(o.ae,{key:0},[(0,o.QD)("div",s,[(0,o.QD)("div",null,[(0,o.QD)("span",n,(0,r.WA)(M.product.nombre),1)]),(0,o.QD)("div",null,[(0,o.wt)((0,o.QD)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>B.onSelectdImage&&B.onSelectdImage(...e)),ref:"imageSelector",accept:"image/png, image/jpeg"},null,544),[[c.Ub,!1]]),M.product.uID?((0,o.Wz)(),(0,o.An)("button",{key:0,class:"btn btn-danger mx-2",onClick:t[1]||(t[1]=(...e)=>B.onDeleteProduct&&B.onDeleteProduct(...e))},[(0,o.mY)(" Borrar "),i])):(0,o.g1)("",!0),M.product.uID?((0,o.Wz)(),(0,o.An)("button",{key:1,class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>B.onPressImage&&B.onPressImage(...e))},[(0,o.mY)(" Subir foto "),u])):(0,o.g1)("",!0)])]),d,(0,o.QD)("div",p,[(0,o.QD)("div",g,[m,(0,o.wt)((0,o.QD)("input",{type:"text",class:"form-control",placeholder:"Nombre del producto","aria-label":"ProductName","aria-describedby":"basic-addon1","onUpdate:modelValue":t[3]||(t[3]=e=>M.product.nombre=e)},null,512),[[c.Og,M.product.nombre]])]),(0,o.QD)("div",h,[b,f,(0,o.wt)((0,o.QD)("input",{type:"text",size:"6",class:"form-control",placeholder:"Precio del producto","aria-label":"ProductPrice","aria-describedby":"basic-addon1","onUpdate:modelValue":t[4]||(t[4]=e=>M.product.price=e)},null,512),[[c.Og,M.product.price]]),D,null!=M.product.category?(0,o.wt)(((0,o.Wz)(),(0,o.An)("select",{key:0,class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[5]||(t[5]=e=>M.product.category.nombre=e)},[(0,o.QD)("option",{value:M.product.category?M.product.category.nombre:null},(0,r.WA)(M.product.category?M.product.category.nombre:null),9,y),((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(M.categories,(e=>((0,o.Wz)(),(0,o.An)(o.ae,{key:e.id},[M.product.category&&e.nombre!==M.product.category.nombre?((0,o.Wz)(),(0,o.An)("option",{key:0,value:e.nombre},(0,r.WA)(e.nombre),9,v)):(0,o.g1)("",!0)],64)))),128))],512)),[[c.Ip,M.product.category.nombre]]):(0,o.wt)(((0,o.Wz)(),(0,o.An)("select",{key:1,class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[6]||(t[6]=e=>M.product.category=e)},[w,((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(M.categories,(e=>((0,o.Wz)(),(0,o.An)("option",{key:e.id,value:e},(0,r.WA)(e.nombre),9,k)))),128))],512)),[[c.Ip,M.product.category]])]),(0,o.QD)("div",Q,[x,(0,o.wt)((0,o.QD)("input",{type:"text",size:"6",class:"form-control",placeholder:"Precio del producto","aria-label":"ProductPrice","aria-describedby":"basic-addon1","onUpdate:modelValue":t[7]||(t[7]=e=>M.product.cantidad=e)},null,512),[[c.Og,M.product.cantidad]])]),(0,o.QD)("div",P,[C,(0,o.wt)((0,o.QD)("textarea",{class:"form-control","aria-label":"With textarea","onUpdate:modelValue":t[8]||(t[8]=e=>M.product.descripcion=e)},"\r\n            ",512),[[c.Og,M.product.descripcion]])]),(0,o.QD)("div",I,[(0,o.QD)("div",A,[(0,o.wt)((0,o.QD)("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked","onUpdate:modelValue":t[9]||(t[9]=e=>M.product.state=e)},null,512),[[c.cV,M.product.state]]),W])]),(0,o.QD)("div",z,[(0,o.QD)("div",S,[(0,o.wt)((0,o.QD)("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked","onUpdate:modelValue":t[10]||(t[10]=e=>M.product.avalible=e)},null,512),[[c.cV,M.product.avalible]]),V])])]),(0,o.QD)("div",null,[E,(0,o.QD)("span",U,(0,r.WA)(B.day),1),(0,o.QD)("span",O,(0,r.WA)(B.month),1),(0,o.QD)("span",F,(0,r.WA)(B.year),1)]),(0,o.K2)(L,{icon:"fa-save","onOn:click":B.saveProduct},null,8,["onOn:click"]),M.product.img&&!M.localImage?((0,o.Wz)(),(0,o.An)("img",{key:0,src:M.product.img,alt:"Entry picture",class:"img-thumbnail"},null,8,$)):(0,o.g1)("",!0),M.localImage?((0,o.Wz)(),(0,o.An)("img",{key:1,src:M.localImage,alt:"Entry picture",class:"img-thumbnail"},null,8,_)):(0,o.g1)("",!0)],64)):(0,o.g1)("",!0)}a(3248);var B=a(7192),L=a(8656),N=a.n(L);const J=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Y=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],j=e=>{const t=new Date(e);return{day:t.getDate(),month:J[t.getMonth()],year:` ${t.getFullYear()}, ${Y[t.getDay()]} `}};var R=j,T=a(6840);const q=async(e,t)=>{if(e)try{const a=new FormData,o={headers:{awt_token:localStorage.getItem("token")}};a.append("archivo",e);const r=await T.c.put(`/api/uploads/productos/${t}`,a,o);return console.log(r),!0}catch(a){return console.error("Error al cargar imagen, revisar logs"),console.log(a),null}};var G=q,H={props:{id:{type:String,required:!0}},data(){return{product:"",categories:"",localImage:null,file:null}},computed:{...(0,B.gV)("products",["getProductsById"]),...(0,B.gV)("categoria",["getCategories"]),day(){const{day:e}=R(this.product.createDate);return e},month(){const{month:e}=R(this.product.createDate);return e},year(){const{year:e}=R(this.product.createDate);return e}},components:{Fab:(0,o.Mn)((()=>a.e(240).then(a.bind(a,3240))))},methods:{...(0,B.ae)("products",["updateProducts","createProducts","deleteProducts"]),...(0,B.ae)("categoria",["updateCategory","createCategory","deleteCategory"]),async loadCategories(){this.categories=await this.getCategories()},loadProduct(){let e;if("new"==this.id)e={date:(new Date).getTime()};else if(e=this.getProductsById(this.id),!e)return this.$router.push({name:"no-entry"});this.product=e},async saveProduct(){new(N())({title:"Espere por favor",allowOutsideClick:!1}),N().showLoading();const e=await G(this.file,this.product.uID);if(null===e&&N().fire({icon:"error",title:"Oops...",text:"Hubo un problema al guardar la imagen"}),this.product.uID)await this.updateProducts(this.product);else{await this.createProducts(this.product)}this.localImage=null,N().fire("Guardado","Entrada registrada con éxito","success")},async onDeleteProduct(){const{isConfirmed:e}=await N().fire({title:"¿Estás seguro?",text:"Una vez borrado, no se puede recuperar",showDenyButton:!0,confirmButtonText:"Si estoy seguro"});if(e){new(N())({title:"Espere por favor",allowOutsideClick:!1}),N().showLoading();const{uID:e}=this.product,{ok:t}=await this.deleteProducts(e);t||(this.$router.push({name:"no-entry"}),N().fire("Eliminado","","success"))}},onSelectdImage(e){const t=e.target.files[0];if(!t)return this.localImage=null,void(this.file=null);this.file=t;const a=new FileReader;a.onload=()=>this.localImage=a.result,a.readAsDataURL(t)},onPressImage(){this.$refs.imageSelector.click()}},created(){this.loadProduct(),this.loadCategories()},watch:{id(){this.loadProduct()},localImage(){this.loadProduct()}}},K=a(4100);const X=(0,K.c)(H,[["render",M],["__scopeId","data-v-53a4deb1"]]);var Z=X}}]);
//# sourceMappingURL=462.4accc234.js.map